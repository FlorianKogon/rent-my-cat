<div class="container">
  <div id="carousel" class="carousel slide mb-4" data-ride="carousel">
    <div class="carousel-inner carousel-cat" >
      <div class="carousel-item active">
        <%= cl_image_tag @cat.photo, class:"d-block w-100" %>
      </div>
      <div class="carousel-item">
        <%= cl_image_tag @cat.photo, class:"d-block w-100" %>
      </div>
    </div>
    <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <h1>Welcome to <%= @cat.name %>'s page <i class="fas fa-cat"></i></h1>

  <div class="d-flex justify-content-between align-items-end">
    <div>
      <p><em>
      <% if @cat.breed == 'Male' %>
        <i class="fas fa-mars"></i>
      <% else %>
        <i class="fas fa-venus"></i>
      <% end %>
      <%= @cat.breed %> - <%= @cat.age %> years old <br>
      <%= @cat.address %></em> <br>

      <%= link_to user_path(User.find(@cat.user_id)), class:'btn btn-outline-dark mt-3' do %>
        <i class="fas fa-user"></i> <%= User.find(@cat.user_id).first_name %>'s profile
      <% end %>
    </p>
    </div>
    <div class="d-flex align-items-end">
      <h2><%= @cat.price_per_day %>â‚¬ <small>per day</small></h2>
      <% if current_user.nil? || current_user.id != @cat.user_id %>
        <%= link_to 'Book this cat', new_cat_booking_path(@cat), class:'btn btn-dark ml-3' %>
        <%= link_to 'Review this cat', cat_path(@cat, anchor: 'review'), class:'btn btn-outline-dark ml-3' %>
      <% else %>
        <%= link_to 'Edit your cat', edit_cat_path(@cat), class:'btn btn-dark ml-3' %>
      <% end %>
    </div>
  </div>
  <hr>

  <p><%= @cat.description %></p>

  <hr>

  <div id="review" class="card-infos mt-5">
    <h3>Review this cat</h3>
    <%= render 'reviews/form', cat: @cat, review: @review %>
  </div>

  <div id="reviews" class="d-flex flex-column-reverse">
    <% if @cat.reviews.blank? %>
      <p class="text-center mt-3 font-italic">Be the first to leave a review for <%= @cat.name %>...</p>
    <% else %>
      <% Review.where("cat_id = ?", @cat.id).each do |review| %>
        <%= render 'reviews/show', review: review %>
      <% end %>
    <% end %>
  </div>
</div>
